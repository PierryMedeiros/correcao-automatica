# .github/workflows/correction.yml

name: Correção Automática de Desafio (Versão Simplificada)

on:
  workflow_dispatch:
    inputs:
      repo_url:
        description: 'URL para clonagem (ex: https://.../repo.git)'
        required: true

jobs:
  correction-pipeline:
    runs-on: ubuntu-latest
    steps:
      - name: 1. Configurando ambiente Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'

      - name: 2. Clonando repositório do aluno
        run: git clone ${{ github.event.inputs.repo_url }} .
      
      - name: 3. Instalando dependências
        run: npm install

      - name: 4. Rodando testes unitários
        run: npm test
      
      # Se todos os passos acima funcionarem, este passo será executado.
      # Se algum falhar, o workflow para antes de chegar aqui.
      - name: 5. Resultado Final
        run: |
          echo "==================================="
          echo "STATUS: APROVADO"
          echo "Todos os testes passaram com sucesso."
          echo "==================================="